{% extends 'base.html' %}
{% block title %}Register New College{% endblock %}

{% block content %}
<div class="row justify-content-center mt-5">
    <div class="col-md-8">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">Register New College</h4>
            </div>
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}

                    <!-- College Info -->
                    <div class="mb-3">
                        <label for="name" class="form-label">College Name</label>
                        <input type="text" class="form-control" id="name" name="name" required>
                    </div>

                    <div class="mb-3">
                        <label for="code" class="form-label">College Code</label>
                        <input type="text" class="form-control" id="code" name="code" required>
                    </div>

                    {% if user.is_staff_user %}
                    <div class="mb-3">
                        <label for="uni_code" class="form-label">University Code</label>
                        <input type="text" class="form-control" id="uni_code" name="uni_code" required>
                    </div>
                    {% endif %}

                    <hr>
                    <h5>College Users</h5>
                    <!-- College Users -->
                    <div id="users-container">
                        <div class="user-entry mb-3">
                            <label class="form-label">Full Name</label>
                            <input type="text" name="names[]" class="form-control mb-1" required>

                            <label class="form-label">Email</label>
                            <input type="email" name="emails[]" class="form-control mb-1" required>

                            <label class="form-label">Password</label>
                            <input type="password" name="passwords[]" class="form-control" required>
                        </div>
                    </div>


                    <button type="button" id="add-user" class="btn btn-secondary mb-3">Add Another User</button>

                    <button type="submit" class="btn btn-primary w-100">Register College</button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    const addUserBtn = document.getElementById('add-user');
    const usersContainer = document.getElementById('users-container');

    addUserBtn.addEventListener('click', () => {
    const userEntry = document.createElement('div');
    userEntry.classList.add('user-entry', 'mb-3');
    userEntry.innerHTML = `
        <label class="form-label">Full Name</label>
        <input type="text" name="names[]" class="form-control mb-1" required>

        <label class="form-label">Email</label>
        <input type="email" name="emails[]" class="form-control mb-1" required>

        <label class="form-label">Password</label>
        <input type="password" name="passwords[]" class="form-control" required>

        <button type="button" class="btn btn-sm btn-danger mt-1 remove-user">Remove</button>
    `;
        usersContainer.appendChild(userEntry);

        // Remove functionality
        userEntry.querySelector('.remove-user').addEventListener('click', () => {
            userEntry.remove();
        });
    });

</script>
{% endblock %}
